<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace를 통해 DataDAO와 연결 -->
<mapper namespace="com.sharp.ing.domain.DataDAO">

	<resultMap id="autoConnect" type="AutoDTO">
		<result property="code01" column="code01"/>
		<result property="code01_vl" column="code01_vl"/>

	</resultMap>

	<select id="autoLevel1" resultMap="autoConnect" parameterType="int">
	<![CDATA[
		select code01, code01_vl
		From level1
	]]>
	</select>

	<insert id="insertShoppinglist" parameterType="com.sharp.ing.domain.Shopping_listDTO">
		<![CDATA[
		INSERT INTO shopping_list VALUES
		(#{list_id}, #{user_id}, #{purchase_date})
		]]>
	</insert>

	<insert id="insertItem" parameterType="com.sharp.ing.domain.ItemDTO">
		<![CDATA[
		INSERT INTO item VALUES
		(#{item_no}, #{list_id}, #{mart_code}, #{price}, #{amount}, #{code01}, #{code02}, #{code03},
		#{code04}, #{qt_code}, #{qt})
		]]>
	</insert>

	<update id="editShoppingList" parameterType="com.sharp.ing.domain.ItemDTO">
		<![CDATA[
			UPDATE shopping_list 
			SET purchase_date=#{purchase_date}
			where list_id=#{list_id} and user_id=#{user_id}
		]]>
	</update>

	<update id="editItem" parameterType="com.sharp.ing.domain.ItemDTO">
		<![CDATA[
			UPDATE item 
			SET mart_code=#{mart_code}, price=#{price}, amount=#{amount}, 
				code01=#{code01}, code02=#{code02}, code03=#{code03}, code04=#{code04}, qt_code=#{qt_code}, qt=#{qt}
			where list_id=#{list_id} and item_no=#{item_no}
		]]>
	</update>

	<delete id="deleteList" parameterType="int">
		<![CDATA[
		delete from shopping_list where list_id = #{list_id}
		]]>
	</delete>

	<delete id="deleteItemList" parameterType="int">
		<![CDATA[
		delete from item where list_id = #{list_id}
		]]>
	</delete>

	<delete id="deleteItem" parameterType="int">
		<![CDATA[
		delete from item where item_no = #{item_no}
		]]>
	</delete>

</mapper>